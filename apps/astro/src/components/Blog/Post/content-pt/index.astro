---
import type { PortableTextProps } from 'astro-portabletext/types';
import { PortableText } from 'astro-portabletext';
import { PortableTextQuery } from '@/components/ui/portable-text';
import Mark from '@/components/ui/portable-text/Mark.astro';
import Normal from './Normal.astro';
import Block from './Block.astro';
import Quote, { QuoteQuery } from './Quote.astro';
import Image, { ImageQuery } from './Image.astro';

export const ContentPTQuery = `
  content[] {
    ${PortableTextQuery()}
    ${QuoteQuery}
    ${ImageQuery}
  },
`;

export type Props = {
  value: PortableTextProps['value'];
};

const { value } = Astro.props;
---

<PortableText
  value={value}
  components={{
    mark: Mark,
    block: {
      normal: Normal,
      h2: Block,
      h3: Block,
      h4: Block,
    },
    type: {
      Quote,
      Image,
    },
  }}
/>
